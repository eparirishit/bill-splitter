/* Using Plus Jakarta Sans for modern feel - must be before @tailwind */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

* {
  font-family: 'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

body {
  font-family: 'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

/* Prevent mobile zoom on input focus (PWA native feel). iOS zooms when input font-size < 16px. */
@media (hover: none) and (pointer: coarse) {
  input,
  select,
  textarea {
    font-size: 16px !important;
  }
}

@layer base {
  :root {
    /* Border: Light gray */
    --border-h: 220;
    --border-s: 10%;
    --border-l: 90%;
    /* Input: Slightly darker border */
    --input-h: 220;
    --input-s: 10%;
    --input-l: 88%;
    /* Ring: Primary Indigo */
    --ring-h: 250;
    --ring-s: 95%;
    --ring-l: 58%;

    /* Chart Colors (can keep or adjust based on new theme) */
    --chart-1-h: 260;
    --chart-1-s: 70%;
    --chart-1-l: 60%;
    /* Primary Purple */
    --chart-2-h: 140;
    --chart-2-s: 60%;
    --chart-2-l: 50%;
    /* Accent Green */
    --chart-3-h: 40;
    --chart-3-s: 70%;
    --chart-3-l: 60%;
    /* Yellowish */
    --chart-4-h: 200;
    --chart-4-s: 70%;
    --chart-4-l: 60%;
    /* Blueish */
    --chart-5-h: 0;
    --chart-5-s: 70%;
    --chart-5-l: 60%;
    /* Redish */

    /* Radius */
    --radius: 0.75rem;
    /* Slightly larger radius for softer look */

    /* HSL variable construction */
    --background: hsl(var(--background-h) var(--background-s) var(--background-l));
    --foreground: hsl(var(--foreground-h) var(--foreground-s) var(--foreground-l));
    --card: hsl(var(--card-h) var(--card-s) var(--card-l));
    --card-foreground: hsl(var(--card-foreground-h) var(--card-foreground-s) var(--card-foreground-l));
    --popover: hsl(var(--popover-h) var(--popover-s) var(--popover-l));
    --popover-foreground: hsl(var(--popover-foreground-h) var(--popover-foreground-s) var(--popover-foreground-l));
    --primary: hsl(var(--primary-h) var(--primary-s) var(--primary-l));
    --primary-foreground: hsl(var(--primary-foreground-h) var(--primary-foreground-s) var(--primary-foreground-l));
    --secondary: hsl(var(--secondary-h) var(--secondary-s) var(--secondary-l));
    --secondary-foreground: hsl(var(--secondary-foreground-h) var(--secondary-foreground-s) var(--secondary-foreground-l));
    --muted: hsl(var(--muted-h) var(--muted-s) var(--muted-l));
    --muted-foreground: hsl(var(--muted-foreground-h) var(--muted-foreground-s) var(--muted-foreground-l));
    --accent: hsl(var(--accent-h) var(--accent-s) var(--accent-l));
    --accent-foreground: hsl(var(--accent-foreground-h) var(--accent-foreground-s) var(--accent-foreground-l));
    --destructive: hsl(var(--destructive-h) var(--destructive-s) var(--destructive-l));
    --destructive-foreground: hsl(var(--destructive-foreground-h) var(--destructive-foreground-s) var(--destructive-foreground-l));
    --border: hsl(var(--border-h) var(--border-s) var(--border-l));
    --input: hsl(var(--input-h) var(--input-s) var(--input-l));
    --ring: hsl(var(--ring-h) var(--ring-s) var(--ring-l));

    --chart-1: hsl(var(--chart-1-h) var(--chart-1-s) var(--chart-1-l));
    --chart-2: hsl(var(--chart-2-h) var(--chart-2-s) var(--chart-2-l));
    --chart-3: hsl(var(--chart-3-h) var(--chart-3-s) var(--chart-3-l));
    --chart-4: hsl(var(--chart-4-h) var(--chart-4-s) var(--chart-4-l));
    --chart-5: hsl(var(--chart-5-h) var(--chart-5-s) var(--chart-5-l));
    --chart-5: hsl(var(--chart-5-h) var(--chart-5-s) var(--chart-5-l));
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    /* Use slate-900 (approx 222 47% 11%) for background to match our slate-900 uses */
    --background-h: 222;
    --background-s: 47%;
    --background-l: 11%;
  }
}

@layer base {
  * {
    @apply border-border ring-offset-background;
  }

  html {
    background-color: #fcfcfd;
    transition: background-color 0.3s ease;
  }

  html.dark {
    background-color: #0f172a;
  }

  body {
    /* Use the new background color */
    @apply bg-[#fcfcfd] dark:bg-slate-900 text-foreground;
    /* Ensure smooth scrolling */
    scroll-behavior: smooth;
    /* Improve text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Force Plus Jakarta Sans font */
    font-family: 'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif !important;
    /* Smooth background transition */
    transition: background-color 0.3s ease;
  }

  /* Ensure inputs and buttons have a slightly larger tap target on mobile */
  input,
  button,
  select,
  textarea {
    min-height: 48px;
    /* Increase min height for better touch */
    @apply px-4 py-2 rounded-lg;
    /* Adjust padding & use larger radius */
    @apply focus:outline-none;
    /* Consistent focus rings */
  }

  /* Specific adjustments for Shadcn components */
  .h-10 {
    @apply min-h-[2.5rem]
  }

  /* Shadcn default height */
  .h-9 {
    @apply min-h-[2.25rem]
  }

  .h-11 {
    @apply min-h-[2.75rem]
  }

  .h-12 {
    @apply min-h-[3rem]
  }

  /* Ensure larger buttons respect min-height */

  /* Card styling to match billsplitter-ai modern design */
  .card-modern {
    @apply bg-card rounded-[2rem] shadow-xl border border-border/50;
    /* Use modern shadow */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
  }

  /* Glass morphism effect */
  .glass {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }

  .dark .glass {
    background: rgba(15, 23, 42, 0.8);
  }

  /* Apply global styles for better mobile layout */
  main {
    @apply w-full max-w-md mx-auto;
    /* Center content on larger screens, full width on mobile */
  }
}


/* Add animations matching billsplitter-ai */
@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  .animate-slide-up {
    animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  @keyframes slideUp {
    from {
      transform: translateY(20px);
      opacity: 0;
    }

    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Add subtle scale on tap for interactive elements */
  .tap-scale {
    @apply transition-transform duration-100 ease-in-out active:scale-95;
  }

  /* Scanner line animation for upload step */
  .scanner-line {
    position: absolute;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, transparent, #4f46e5, transparent);
    box-shadow: 0 0 12px #4f46e5;
    animation: scanner 2.5s ease-in-out infinite;
    z-index: 20;
  }

  @keyframes scanner {
    0% {
      top: 0%;
      opacity: 0;
    }

    10% {
      opacity: 1;
    }

    90% {
      opacity: 1;
    }

    100% {
      top: 100%;
      opacity: 0;
    }
  }

  /* Safe area bottom for mobile devices */
  .safe-bottom {
    padding-bottom: calc(24px + env(safe-area-inset-bottom, 0px));
  }

  /* Hide scrollbar but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* AI Icon Animation */
  .ai-icon-animation {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .ai-icon-animation i {
    animation: aiPulse 2s ease-in-out infinite;
  }

  @keyframes aiPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.2);
      opacity: 0.8;
    }
  }
}

.dropdownItem:focus {
  background-color: #f2edfc !important;
}

.dropdownItem:focus span {
  color: #8152e1 !important;
}

.scrollArea {
  overflow-y: scroll !important;
}

.logo-img {
  width: auto;
  height: 35px;
  object-fit: contain;
}

/* Remove number input spinners across all browsers */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}